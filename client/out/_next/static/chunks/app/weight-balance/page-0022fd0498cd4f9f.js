(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{8448:function(e,t,i){Promise.resolve().then(i.bind(i,2446))},2446:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return WeightAndBalancePage}});var l=i(7437),s=i(2265),a=i(6582),r=i(5086);function WeightBalanceLayout(e){let{children:t}=e;return(0,l.jsx)(r.WH,{title:"Weight & Balance Calculator",children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("div",{className:"border-b pb-4 mb-2",children:(0,l.jsx)("p",{className:"text-sm text-muted-foreground text-center italic",children:"Precise weight and balance calculations for Tecnam P2008JC (Part 135)"})}),t]})})}var n=i(3089),h=i(6429),c=i(609),d=i(7461),x=i(9950),m=i(4631),g=i(495),o=i(1735),u=i(6988),j=i(247),p=i.n(j),F=i(221);function WeightAndBalancePage(){let[e,t]=(0,s.useState)({emptyWeight:0,emptyArm:0,pilotWeight:0,passengerWeight:0,fuelMass:0,baggageWeight:0,flightTime:{trip:0,contingency:0,alternate:0,other:0,reserve:0,taxi:0},scenario:"standard"}),[i,r]=(0,s.useState)(null),[j,T]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),[_]=(0,s.useState)(null),handleInputChange=(e,i)=>{t(t=>{let l={...t,[e]:i};return t.scenario&&"standard"!==t.scenario?(0,g.b_)(l,t.scenario):l})},handleFlightTimeChange=(e,i)=>{t(t=>{let l={...t.flightTime,[e]:i};"trip"===e&&(l.contingency=Number((.1*i).toFixed(2)));let s={...t,flightTime:l};return t.scenario&&"standard"!==t.scenario?(0,g.b_)(s,t.scenario):s})},handleCalculate=async()=>{T(!0),b(null);try{let t;t="maxFuel"===e.scenario?function(e){let{emptyWeight:t,pilotWeight:i,passengerWeight:l,baggageWeight:s}=e,a=g.zh.MAX_TAKEOFF_WEIGHT-(t+i+l+s);if(a<=0)throw Error("Operation not feasible: total weight exceeds maximum takeoff weight.");let r=a/g.w8.LITRES_TO_KG,n=(0,g.Wj)(e);if(r<n)throw Error("Operation not feasible: Maximum possible fuel (".concat(r.toFixed(1),"L) is less than minimum required fuel (").concat(n.toFixed(1),"L). Consider reducing payload or recalculating flight times."));let h=Number((Math.min(120,r)*g.w8.LITRES_TO_KG).toFixed(2)),c=Number((e.flightTime.taxi*g.w8.LITRES_TO_KG).toFixed(2));return{flightFuelMass:h,actualDip:h+c}}(e):"minFuel"===e.scenario?function(e){if("minFuel"===e.scenario&&e.baggageWeight<=0)throw Error("Takeoff weight above 650 Kgs. Operation not feasible.");let t=(0,g.Wj)(e),i=Number((t*g.w8.LITRES_TO_KG).toFixed(2)),l=g.Dx*g.w8.LITRES_TO_KG,s=Number((i-l).toFixed(2));return{flightFuelMass:s,actualDip:i}}(e):function(e){let t=(0,g.Wj)(e),i=Number((t*g.w8.LITRES_TO_KG).toFixed(2)),l=Number(((t-e.flightTime.taxi)*g.w8.LITRES_TO_KG).toFixed(2));return{flightFuelMass:l,actualDip:i}}(e);let i={...e,fuelMass:t.flightFuelMass,actualDip:t.actualDip},l=(0,u.wH)(i);if(l.length>0){b(l.map(e=>e.message).join(", ")),T(!1);return}let s=await fetch("/api/weight-balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){let e=await s.json();throw Error(e.error||"Calculation failed")}let a=await s.json();r(a)}catch(e){console.error("Error:",e),b(e instanceof Error?e.message:"An unknown error occurred")}finally{T(!1)}};return(0,l.jsx)(WeightBalanceLayout,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Aircraft Data"}),(0,l.jsx)(c.Zb,{className:"p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"emptyWeight",children:"Empty Weight (kg)"}),(0,l.jsx)(a.I,{id:"emptyWeight",type:"number",placeholder:"Enter aircraft empty weight",value:e.emptyWeight,onChange:e=>handleInputChange("emptyWeight",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"emptyArm",children:"Empty Arm (m)"}),(0,l.jsx)(a.I,{id:"emptyArm",type:"number",placeholder:"Enter empty arm value",value:e.emptyArm,onChange:e=>handleInputChange("emptyArm",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"emptyMoment",children:"Empty Moment (kg\xb7m) (optional)"}),(0,l.jsx)(a.I,{id:"emptyMoment",type:"number",placeholder:"Will be calculated if not provided",onChange:e=>handleInputChange("emptyMoment",parseFloat(e.target.value))})]})]})})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Weights"}),(0,l.jsx)(c.Zb,{className:"p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"pilotWeight",children:"Pilot Weight (kg)"}),(0,l.jsx)(a.I,{id:"pilotWeight",type:"number",placeholder:"Enter pilot weight in kg",value:e.pilotWeight,onChange:e=>handleInputChange("pilotWeight",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"passengerWeight",children:"Passenger Weight (kg)"}),(0,l.jsx)(a.I,{id:"passengerWeight",type:"number",placeholder:"Enter passenger weight in kg",value:e.passengerWeight,onChange:e=>handleInputChange("passengerWeight",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(h._,{htmlFor:"baggageWeight",children:["Baggage Weight (kg)","minFuel"===e.scenario&&" (Auto-calculated)"]}),(0,l.jsx)(a.I,{id:"baggageWeight",type:"number",placeholder:"Enter baggage weight in kg",value:e.baggageWeight,onChange:e=>handleInputChange("baggageWeight",parseFloat(e.target.value)),disabled:"minFuel"===e.scenario,className:"minFuel"===e.scenario?"bg-gray-100":""}),"minFuel"===e.scenario&&null!==_&&(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Maximum allowable baggage: ",_.toFixed(1)," kg",_===g.zh.MAX_BAGGAGE_WEIGHT&&(0,l.jsx)("span",{className:"block",children:"(Limited by maximum baggage weight limit of 20 kg)"}),_<g.zh.MAX_BAGGAGE_WEIGHT&&(0,l.jsx)("span",{className:"block",children:"(Limited by maximum takeoff weight of 650 kg)"})]})]})]})})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Scenario"}),(0,l.jsx)(c.Zb,{className:"p-4",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"scenario",children:"Select Scenario"}),(0,l.jsxs)(o.Ph,{value:e.scenario,onValueChange:e=>{t(t=>(0,g.b_)({...t,scenario:e},e))},children:[(0,l.jsx)(o.i4,{className:"w-full",children:(0,l.jsx)(o.ki,{placeholder:"Select a scenario"})}),(0,l.jsxs)(o.Bw,{children:[(0,l.jsx)(o.Ql,{value:"standard",children:"Standard"}),(0,l.jsx)(o.Ql,{value:"maxFuel",children:"Max Fuel"}),(0,l.jsx)(o.Ql,{value:"minFuel",children:"Min Fuel"})]})]})]})})})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Flight Time"}),(0,l.jsx)(c.Zb,{className:"p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"tripTime",children:"Trip Time (hrs)"}),(0,l.jsx)(a.I,{id:"tripTime",type:"number",placeholder:"Enter trip time in hours",value:e.flightTime.trip,onChange:e=>handleFlightTimeChange("trip",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"contingencyTime",children:"Contingency (hrs)"}),(0,l.jsx)(a.I,{id:"contingencyTime",type:"number",placeholder:"Auto-calculated (10% of trip)",value:e.flightTime.contingency,disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"alternateTime",children:"Alternate (hrs)"}),(0,l.jsx)(a.I,{id:"alternateTime",type:"number",placeholder:"Enter alternate time in hours",value:e.flightTime.alternate,onChange:e=>handleFlightTimeChange("alternate",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"otherTime",children:"Other (hrs)"}),(0,l.jsx)(a.I,{id:"otherTime",type:"number",placeholder:"Enter other time in hours",value:e.flightTime.other,onChange:e=>handleFlightTimeChange("other",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"reserveTime",children:"Reserve (hrs)"}),(0,l.jsx)(a.I,{id:"reserveTime",type:"number",placeholder:"Enter reserve time in hours",value:e.flightTime.reserve,onChange:e=>handleFlightTimeChange("reserve",parseFloat(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h._,{htmlFor:"taxiTime",children:"Taxi Fuel (L)"}),(0,l.jsx)(a.I,{id:"taxiTime",type:"number",placeholder:"Enter taxi fuel in liters",value:e.flightTime.taxi,onChange:e=>handleFlightTimeChange("taxi",parseFloat(e.target.value))})]})]})})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)(n.z,{disabled:j,onClick:handleCalculate,children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.Z,{size:16})," Calculating..."]}):"Calculate"}),(0,l.jsx)(n.z,{variant:"outline",onClick:()=>{r(null),b(null)},children:"Reset"})]}),f&&(0,l.jsxs)(x.bZ,{variant:"destructive",className:p().errorAlert,children:[(0,l.jsx)(m.Z,{className:"h-4 w-4"}),(0,l.jsx)(x.Cd,{children:"maxFuel"===e.scenario?"Fuel Planning Error":"Calculation Error"}),(0,l.jsx)(x.X,{className:"mt-2",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{children:f}),"maxFuel"===e.scenario&&(0,l.jsxs)("div",{className:"mt-2 text-sm",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Current values:"}),(0,l.jsxs)("ul",{className:"list-disc pl-4 mt-1",children:[(0,l.jsxs)("li",{children:["Total payload weight: ",(e.pilotWeight+e.passengerWeight+e.baggageWeight).toFixed(1)," kg"]}),(0,l.jsxs)("li",{children:["Minimum fuel required: ",(0,g.Wj)(e).toFixed(1)," L"]}),(0,l.jsxs)("li",{children:["Available weight for fuel: ",(g.zh.MAX_TAKEOFF_WEIGHT-e.emptyWeight-e.pilotWeight-e.passengerWeight-e.baggageWeight).toFixed(1)," kg"]})]})]})]})})]}),i&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Calculation Results"}),(0,l.jsxs)(d.mQ,{defaultValue:"weights",children:[(0,l.jsxs)(d.dr,{className:"grid grid-cols-3 mb-4",children:[(0,l.jsx)(d.SP,{value:"fuel",children:"Fuel Calculations"}),(0,l.jsx)(d.SP,{value:"weights",children:"Weight & Balance"}),(0,l.jsx)(d.SP,{value:"cg",children:"CG Analysis"})]}),(0,l.jsx)(d.nU,{value:"fuel",children:(0,l.jsxs)(c.Zb,{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-3",children:"Minimum Fuel Required"}),(0,l.jsxs)("table",{className:p().table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Item"}),(0,l.jsx)("th",{className:"text-right",children:"Time (hrs)"}),(0,l.jsx)("th",{className:"text-right",children:"Litres (L)"}),(0,l.jsx)("th",{className:"text-right",children:"Weight (kg)"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Trip Fuel"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.trip.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.trip*g.w8.FLIGHT_TIME_TO_FUEL_RATE).toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.trip*g.w8.FLIGHT_TIME_TO_FUEL_RATE*g.w8.LITRES_TO_KG).toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Contingency (10% of Trip)"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.contingency.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.contingency*g.w8.FLIGHT_TIME_TO_FUEL_RATE).toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.contingency*g.w8.FLIGHT_TIME_TO_FUEL_RATE*g.w8.LITRES_TO_KG).toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Alternate"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.alternate.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.alternate*g.w8.FLIGHT_TIME_TO_FUEL_RATE).toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.alternate*g.w8.FLIGHT_TIME_TO_FUEL_RATE*g.w8.LITRES_TO_KG).toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Other"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.other.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.other*g.w8.FLIGHT_TIME_TO_FUEL_RATE).toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.other*g.w8.FLIGHT_TIME_TO_FUEL_RATE*g.w8.LITRES_TO_KG).toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Reserve"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.reserve.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.reserve*g.w8.FLIGHT_TIME_TO_FUEL_RATE).toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:(e.flightTime.reserve*g.w8.FLIGHT_TIME_TO_FUEL_RATE*g.w8.LITRES_TO_KG).toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Taxi"}),(0,l.jsx)("td",{className:"text-right",children:e.flightTime.taxi.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.taxi.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.taxi.weight.toFixed(2)})]}),(0,l.jsxs)("tr",{className:"font-bold",children:[(0,l.jsx)("td",{children:"Total Minimum Fuel"}),(0,l.jsx)("td",{className:"text-right",children:i.minimumFuelRequired.time.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.minimumFuelRequired.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.minimumFuelRequired.weight.toFixed(2)})]})]})]}),(0,l.jsx)("h3",{className:"font-semibold mt-6 mb-3",children:"Actual Fuel State"}),(0,l.jsxs)("table",{className:p().table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Item"}),(0,l.jsx)("th",{className:"text-right",children:"Litres (L)"}),(0,l.jsx)("th",{className:"text-right",children:"Weight (kg)"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Actual Dip (Useable)"}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.actualDip.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.actualDip.weight.toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Taxi"}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.taxi.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.taxi.weight.toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Actual Flight Fuel"}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.actualFlightFuel.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.actualFlightFuel.weight.toFixed(2)})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Burn Off"}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.burnOff.litres.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:i.actualFuelState.burnOff.weight.toFixed(2)})]})]})]})]})}),(0,l.jsx)(d.nU,{value:"weights",children:(0,l.jsxs)(c.Zb,{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-3",children:"Weight and Balance Table"}),(0,l.jsxs)("table",{className:p().table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Item"}),(0,l.jsx)("th",{className:"text-right",children:"Weight (kg)"}),(0,l.jsx)("th",{className:"text-right",children:"Arm (m)"}),(0,l.jsx)("th",{className:"text-right",children:"Moment (kg\xb7m)"}),(0,l.jsx)("th",{className:"text-right",children:"Max"})]})}),(0,l.jsx)("tbody",{children:i.weightAndBalance.items.map((e,t)=>(0,l.jsxs)("tr",{className:e.name.includes("Take Off Weight")||e.name.includes("Landing Weight")?"font-bold":"",children:[(0,l.jsx)("td",{children:e.name}),(0,l.jsx)("td",{className:"text-right",children:e.weight.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:e.arm.toFixed(3)}),(0,l.jsx)("td",{className:"text-right",children:e.moment.toFixed(2)}),(0,l.jsx)("td",{className:"text-right",children:e.max||"-"})]},t))})]})]})}),(0,l.jsx)(d.nU,{value:"cg",children:(0,l.jsxs)(c.Zb,{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-3",children:"Center of Gravity Analysis"}),(0,l.jsxs)("div",{className:"bg-slate-50 p-4 rounded-md mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,l.jsx)("span",{children:"Forward Limit (1.841m)"}),(0,l.jsx)("span",{children:"Aft Limit (1.978m)"})]}),(0,l.jsx)("div",{className:"relative h-6 bg-slate-200 rounded-full",children:(0,l.jsx)("div",{className:"absolute top-0 w-3 h-6 bg-blue-500 rounded-full",style:{left:"".concat((i.weightAndBalance.centerOfGravity-1.841)/.137*100,"%"),transform:"translateX(-50%)"}})}),(0,l.jsxs)("div",{className:"mt-2 text-center",children:["Current CG: ",i.weightAndBalance.centerOfGravity.toFixed(3),"m"]})]}),(0,l.jsxs)("div",{className:"p-3 rounded-md ".concat(i.weightAndBalance.isWithinLimits?p().success:p().warning),children:[(0,l.jsx)("p",{className:"font-medium",children:i.weightAndBalance.isWithinLimits?"✓ CG is within limits":"✗ CG is out of limits"}),(0,l.jsxs)("p",{children:["Takeoff Weight: ",i.weightAndBalance.takeoffWeight.toFixed(2),"kg",i.weightAndBalance.takeoffWeight>650&&" (Exceeds maximum of 650kg)"]}),(0,l.jsxs)("p",{children:["CG Position: ",i.weightAndBalance.centerOfGravity.toFixed(3),"m"]})]})]})})]})]})]})})}},247:function(e){e.exports={table:"styles_table__x9Pp8",input:"styles_input__oVYOX",calculated:"styles_calculated__LwfBX",warning:"styles_warning__qL_KF",success:"styles_success__MQFCQ"}}},function(e){e.O(0,[695,569,971,472,744],function(){return e(e.s=8448)}),_N_E=e.O()}]);